## ä» 0 åˆ° 1 æ­å»ºä¸€ä¸ªä¼ä¸šçº§å‰ç«¯å¼€å‘è§„èŒƒ

å‰ç«¯ä»£ç è§„èŒƒå¯¹äºå›¢é˜Ÿè€Œè¨€è‡³å…³é‡è¦ï¼Œæ—¢å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œä¹Ÿå¯ä»¥é™ä½ä»£ç å¤šäººç»´æŠ¤çš„æˆæœ¬

é‚£å¦‚ä½•æ­å»ºä¸€ä¸ªè§„èŒƒçš„å‰ç«¯é¡¹ç›®åŸºç¡€å‘¢ï¼Ÿæ¥ä¸‹æ¥è®©æˆ‘å‘Šè¯‰ä½ 

## åˆ›å»ºä¸€ä¸ªåŸºç¡€é¡¹ç›®

ä½¿ç”¨ `npm init \-y` åˆå§‹åŒ–ä¸€ä¸ªå‰ç«¯é¡¹ç›®,è¿™ä¼šè‡ªåŠ¨ç”Ÿæˆ`package.json` æ–‡ä»¶ã€‚å½“æˆ‘ä»¬å®‰è£…é¡¹ç›®ä¾èµ–çš„æ—¶å€™,è¿™ä¸ªæ–‡ä»¶ä¼šè‡ªåŠ¨æ›´æ–°

æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ç›®å½•

```
â””â”€â”€ src/
    â”œâ”€â”€ index.ts    // é¡¹ç›®å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json
```

## æ·»åŠ  TypeScript

æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ TypeScript å‘¢?

- TypeScript ä¼šåœ¨ç¼–è¯‘ä»£ç æ—¶ï¼Œè¿›è¡Œä¸¥æ ¼çš„é™æ€**ç±»å‹æ£€æŸ¥**ã€‚æ„å‘³ç€å¯ä»¥åœ¨ç¼–ç é˜¶æ®µå‘ç°å­˜åœ¨çš„éšæ‚£ï¼Œè€Œä¸ç”¨æŠŠéšæ‚£å¸¦åˆ°çº¿ä¸Šå»
- TypeScript ä¼š**åŒ…æ‹¬æ¥è‡ª ES6 å’Œæœªæ¥ææ¡ˆä¸­çš„ç‰¹æ€§**ï¼Œæ¯”å¦‚å¼‚æ­¥æ“ä½œå’Œè£…é¥°å™¨ï¼Œä¹Ÿä¼šä»å…¶ä»–è¯­è¨€å€Ÿé‰´ç‰¹æ€§ï¼Œæ¯”å¦‚æ¥å£å’ŒæŠ½è±¡ç±»
- TypeScript ç¼–è¯‘æˆ JavaScript åï¼Œå¯ä»¥åœ¨ä»»ä½•æµè§ˆå™¨/æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚æ— éœ€ä»»ä½•è¿è¡Œæ—¶çš„é¢å¤–å¼€é”€
- TypeScript æ¥å£å®šä¹‰å,å¯ä»¥å……åˆ†åˆ©ç”¨ VSCode çš„**è‡ªåŠ¨è¡¥å…¨/è‡ªåŠ¨æç¤º**åŠŸèƒ½.å› æ­¤å¯ä»¥ç›´æ¥ä»£æ›¿æ–‡æ¡£ï¼ŒåŒæ—¶å¯ä»¥æé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ CLI ä¸­å®‰è£… TypeScript

```
yarn add typescript   --dev
```

ç„¶åè¿›è¡Œ TypeScript é…ç½®ï¼åœ¨é¡¹ç›®æ ¹ç›®å½•é€šè¿‡`tsc \--init`å‘½ä»¤æ¥åˆ›å»º `tsconfig.json` æ–‡ä»¶å¹¶æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹

æœ‰å…³ TypeScript çš„è¯¦ç»†é…ç½®å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« 

```
{
  "compilerOptions": {
    "module": "esnext",
    "target": "esnext",
    "lib": ["esnext", "dom"],
    "baseUrl": ".",
    "jsx": "react-jsx",
    "resolveJsonModule": true,
    "allowSyntheticDefaultImports": true,
    "moduleResolution": "node",
    "forceConsistentCasingInFileNames": true,
    "noImplicitReturns": true,
    "suppressImplicitAnyIndexErrors": true,
    "noUnusedLocals": true,
    "allowJs": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "strict": true,
    "paths": {
      "@/*": ["./src/*"]
    },
    "noEmit": true
  },
  "include": [
    "src/**/*",
    "typings/**/*",
    "config/**/*",
    ".eslintrc.js",
    ".stylelintrc.js",
    ".prettierrc.js"
  ],
  "exclude": ["node_modules", "build", "dist"]
}
```

åœ¨æˆ‘ä»¬çš„`React Buildé¡¹ç›®`ä¸­, ä½¿ç”¨ Webpack çš„ Babel å¯¹é¡¹ç›®ä»£ç è¿›è¡Œç¼–è¯‘,å› æ­¤ä½¿ç”¨ TypeScript çš„å”¯ä¸€ç›®çš„ä»…ä»…æ˜¯å¯¹é¡¹ç›®ä»£ç è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚

å› ä¸º `tsconfig.json` ä¸­çš„ç¼–è¯‘é€‰é¡¹ä»…ä»…é’ˆå¯¹ä»£ç ç±»å‹æ£€æŸ¥ï¼Œè€Œä¸æ˜¯ä»£ç ç¼–è¯‘,å› æ­¤ä¸éœ€è¦è®© TypeScript ç”Ÿæˆç¼–è¯‘æ–‡ä»¶

ä»¥ä¸‹æ˜¯`tsconfig.json`ä¸­ä¸€äº›è®¾ç½®çš„è§£é‡Š

- `lib`: TS éœ€è¦å¼•ç”¨çš„åº“ï¼Œå³å£°æ˜æ–‡ä»¶ï¼ŒES5 é»˜è®¤ dom,es5,scripthost
- `allowJs`: å…è®¸ç¼–è¯‘ JS æ–‡ä»¶(js,jsx)
- `allowSyntheticDefaultImports`: å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥. å‚è€ƒæ–‡æ¡£
- `esModuleInterop`: å‚è€ƒæ–‡æ¡£
- `skipLibCheck`:å¿½ç•¥æ‰€æœ‰çš„å£°æ˜æ–‡ä»¶ï¼ˆ *.d.tsï¼‰çš„ç±»å‹æ£€æŸ¥
- `strict`:å¼€å¯æ‰€æœ‰ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥.å¦‚æœ strict=true,åˆ™ æ‰€æœ‰ strict ç›¸å…³çš„é…ç½®éƒ½åº”è¯¥ä¸º true
- `forceConsistentCasingInFileNames`:ç¦æ­¢å¯¹åŒä¸€ä¸ªæ–‡ä»¶çš„ä¸ä¸€è‡´çš„å¼•ç”¨.ä¾‹å¦‚:å¼•ç”¨æ–‡ä»¶æ—¶å¤§å°å†™å¿…é¡»ä¸€è‡´
- `moduleResolution`:ä½¿ç”¨å“ªç§æ¨¡å—è§£æç­–ç•¥.å‚è€ƒæ–‡æ¡£
- `resolveJsonModule`:æ˜¯å¦å¯ä»¥å¯¼å…¥ JSON æ¨¡å—.å‚è€ƒæ–‡æ¡£
- `isolatedModules`:æ¯ä¸ªæ–‡ä»¶å¿…é¡»æ˜¯æ¨¡å—.å‚è€ƒæ–‡æ¡£
- `noEmit`:ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶
- `jsx`: æ”¯æŒ JSX.å‚è€ƒæ–‡æ¡£
- `include`:ç¼–è¯‘å™¨éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶æˆ–è€…ç›®å½•

## æ·»åŠ  ESLint ä»£ç è§„èŒƒæ ¡éªŒ

ESLint å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‰¾å‡ºæœ‰é—®é¢˜çš„ç¼–ç æ¨¡å¼æˆ–ä¸ç¬¦åˆè§„åˆ™çš„ä»£ç 

æœ‰å…³ ESLint çš„è¯¦ç»†è®¨è®ºå¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« 

OK!è®©æˆ‘ä»¬å¼€å§‹å®‰è£… ESLint çš„ç›¸å…³ä¾èµ–

```
yarn add eslint eslint-plugin-react eslint-plugin-react-hooks @typescript-eslint/parser @typescript-eslint/eslint-plugin --dev
```

ä»¥ä¸‹æ˜¯ä¸€äº› ESLint ä¾èµ–çš„è§£é‡Š

- `eslint`: ESLint æ ¸å¿ƒåº“

- `eslint-plugin-react`: React ä»£ç è§„èŒƒçš„æ ¡éªŒè§„åˆ™

- - `react/jsx-key`:ç”¨æ¥æ£€æŸ¥æ˜¯å¦å£°æ˜äº† key å±æ€§
  - `no-array-index-key`:ç”¨æ¥æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†æ•°ç»„ç´¢å¼•å£°æ˜ key å±æ€§
  - ....å…¶ä»– React ç›¸å…³è§„èŒƒ

- `eslint-plugin-react-hooks`:React hooks ä»£ç è§„èŒƒçš„æ ¡éªŒè§„åˆ™

- - rules-of-hooks: ç”¨æ¥æ£€æŸ¥ Hook çš„è§„åˆ™(ä¸èƒ½ if/å¾ªç¯ä¸­ä½¿ç”¨ Hooks)
  - exhaustive-deps è§„åˆ™ï¼Œæ­¤è§„åˆ™ä¼šåœ¨`useEffct`æ·»åŠ é”™è¯¯ä¾èµ–æ—¶å‘å‡ºè­¦å‘Šå¹¶ç»™å‡ºä¿®å¤å»ºè®®

- `@typescript-eslint/parser`:å°† TypeScript ä»£ç çº³å…¥ ESLint æ ¡éªŒèŒƒå›´

- `@typescript-eslint/eslint-plugin`:TypeScript ä»£ç è§„èŒƒçš„æ ¡éªŒè§„åˆ™

åœ¨æ ¹ç›®å½•åˆ›å»º`.eslintrc.json`æ–‡ä»¶å¹¶åŠ å…¥ä»¥ä¸‹å†…å®¹

```
{
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "ecmaVersion": 2018,
    "sourceType": "module"
  },
  "plugins": ["@typescript-eslint", "react-hooks"],
  "extends": [
    "plugin:react/recommended",
    "plugin:@typescript-eslint/recommended"
  ],
  "rules": {
    "react-hooks/rules-of-hooks": "error",
    "react-hooks/exhaustive-deps": "warn",
    "react/prop-types": "off",
    "@typescript-eslint/explicit-module-boundary-types": "off"
  }
}
```

æˆ‘ä»¬åœ¨ ESLint é…ç½®æ–‡ä»¶ä¸­åšäº†ä¸‹é¢çš„äº‹æƒ…

- å°†`@typescript-eslint/parser` ä½œä¸ºESLint è§£æå™¨
- ä½¿ç”¨`plugin:react/recommended`/`plugin:@typescript-eslint/recommended`ä½œä¸ºåŸºæœ¬è§„åˆ™é›†
- æ·»åŠ äº†ä¸¤ä¸ª React Hooks è§„åˆ™ï¼Œå¹¶å–æ¶ˆäº† react/prop-types è§„åˆ™,å› ä¸º prop ç±»å‹ä¸ React å’Œ TypeScript é¡¹ç›®æ— å…³ã€‚
- å…³é—­äº†`explicit-module-boundary-types`,Typescript ä¸­,å¿…é¡»æ˜ç¡®æŒ‡å®šå‡½æ•°çš„è¿”å›å€¼ç±»å‹ã€‚å¹¶ä¸”å‡½æ•°ä¸­çš„`return`åçš„ç±»å‹å¿…é¡»ä¸æŒ‡å®šçš„ç±»å‹ä¸€è‡´ å‚è€ƒæ–‡æ¡£

ä¸‹é¢æ˜¯ä¸€ä¸ª "explicit-module-boundary-types" è§„åˆ™çš„æ —å­

```
// ä¼šå‡ºç° explicit-module-boundary-typesè­¦å‘Š
export default function () {
  return 1;
}

// ä¸‹é¢çš„å‡½æ•°ä¸ä¼šå‡ºç°è­¦å‘Š
export var fn = function (): number {
  return 1;
};
```

TS ä¸­å¯ä»¥é€šè¿‡**ç±»å‹æ¨æ–­**åˆ¤æ–­å‡ºå‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œå› æ­¤å¯ä»¥å…³é—­æ­¤ Lint

æ·»åŠ  NPM è„šæœ¬

```
{
  "script": {
    "lint-staged:js": "eslint --ext .js,.jsx,.ts,.tsx ",
    "lint:js": "eslint --cache --ext .js,.jsx,.ts,.tsx ./src",
    "lint:fix": "eslint --fix --cache --ext .js,.jsx,.ts,.tsx"
  }
}
```

- `lint-staged:js`: åªæ ¡éªŒåç¼€åä¸º".js,.jsx,.ts,.tsx"çš„æ–‡ä»¶
- `lint:js`: åªæ ¡éªŒ`src`ç›®å½•ä¸‹,åç¼€åä¸º".js,.jsx,.ts,.tsx"çš„æ–‡ä»¶ä¸­,è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚è¿™ä¼šç”Ÿæˆä¸€ä¸ª`.eslintcache`æ–‡ä»¶ç”¨æ¥ç¼“å­˜å·²æ ¡éªŒè¿‡çš„æ–‡ä»¶
- `lint:fix`: æ ¹æ® `.eslintcache`æ–‡ä»¶ï¼Œæ ¡éªŒè¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚å¹¶ä¸”è‡ªåŠ¨ä¿®å¤

å¦‚æœéœ€è¦å±è”½ä¸éœ€è¦æ£€æµ‹çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ  `.eslintignore`

```
.DS_Store
node_modules
dist
build
public
```

## æ·»åŠ  Prettier ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·

Prettier æ˜¯ä¸€ä¸ªä»£ç æ ¼å¼åŒ–çš„å·¥å…·.æŸäº›ä¸ä»£ç æ ¡éªŒæœ‰å…³çš„è§„åˆ™ï¼ˆä¾‹å¦‚ï¼Œè¯­å¥æœ«å°¾æ˜¯å¦åŠ åˆ†å·ï¼‰å°±å¯ä»¥ç”± Prettier è‡ªåŠ¨å¤„ç†ã€‚

æœ‰å…³ Prettier çš„è¯¦ç»†è®¨è®ºå¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« 

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ CLI ä¸­å®‰è£… Prettier

```
yarn add prettier  --dev
```

åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º`.prettierrc` å¹¶åŠ å…¥ä»¥ä¸‹å†…å®¹

```
{
  "printWidth": 80,
  "singleQuote": true,
  "semi": true,
  "tabWidth": 2,
  "trailingComma": "all"
}
```

ä¸º`VSCode` å®‰è£… Prettier æ’ä»¶

é€šè¿‡åœ¨â€œè®¾ç½®â€ä¸­å‹¾é€‰â€œä¿å­˜æ—¶è¿›è¡Œæ ¼å¼åŒ–â€é€‰é¡¹ï¼Œ å°±å¯ä»¥åœ¨æ–‡ä»¶ä¿å­˜æ—¶ä½¿ç”¨ Prettier è¿›è¡Œè‡ªåŠ¨æ ¼å¼åŒ–

å¦‚æœéœ€è¦å±è”½ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ  `.prettierignore`å¹¶åŠ å…¥ä»¥ä¸‹å†…å®¹

```
*.svg
package.json
.DS_Store
.eslintignore
*.png
*.toml
.editorconfig
.gitignore
.prettierignore
LICENSE
.eslintcache
*.lock
yarn-error.log
/build
/public
```

æ·»åŠ  npm è„šæœ¬

```
"script":{
  "lint:prettier": "prettier --check \"src/**/*\" --end-of-line auto",
  "prettier": "prettier -c --write \"src/**/*\""
}
```

è§£é‡Šä¸€ä¸‹è„šæœ¬çš„å«ä¹‰

- `lint:prettier`:å½“æƒ³è¦æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²è¢«æ ¼å¼åŒ–æ—¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨`--check`æ ‡å¿—ï¼ˆæˆ–`-c`ï¼‰è¿è¡Œ Prettierã€‚è¿™å°†è¾“å‡ºä¸€æ¡è¯­ä¹‰åŒ–çš„æ¶ˆæ¯å’Œæœªæ ¼å¼åŒ–æ–‡ä»¶çš„åˆ—è¡¨ã€‚ä¸Šé¢è„šæœ¬çš„æ„æ€æ˜¯æ ¼å¼åŒ–`src`ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
- `prettier`:é‡æ–°æ ¼å¼åŒ–æ‰€æœ‰å·²è¢«å¤„ç†è¿‡çš„æ–‡ä»¶ã€‚ç±»ä¼¼äº`eslint --fix`çš„å·¥ä½œã€‚ä¸Šé¢è„šæœ¬çš„æ„æ€æ˜¯é‡æ–°æ ¼å¼åŒ–`src`ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶

## æ·»åŠ  EditorConfig ä»£ç é£æ ¼ç»Ÿä¸€å·¥å…·

EditorConfig æœ‰åŠ©äºç»´æŠ¤è·¨å¤šä¸ªç¼–è¾‘å™¨å’Œ IDE ä»äº‹åŒä¸€é¡¹ç›®çš„å¤šä¸ªå¼€å‘äººå‘˜çš„ä¸€è‡´ç¼–ç é£æ ¼ï¼Œå›¢é˜Ÿå¿…å¤‡ç¥å™¨ã€‚

æœ‰å…³ EditorConfig çš„è¯¦ç»†è®¨è®ºå¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« 

ä¸º`VSCode` å®‰è£… EditorConfig æ’ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º`.editorconfig`å¹¶åŠ å…¥ä»¥ä¸‹å†…å®¹

```
# http://editorconfig.org
root = true

[*]
#ç¼©è¿›é£æ ¼ï¼šç©ºæ ¼
indent_style = space
#ç¼©è¿›å¤§å°2
indent_size = 2
#æ¢è¡Œç¬¦lf
end_of_line = lf
#å­—ç¬¦é›†utf-8
charset = utf-8
#æ˜¯å¦åˆ é™¤è¡Œå°¾çš„ç©ºæ ¼
trim_trailing_whitespace = true
#æ˜¯å¦åœ¨æ–‡ä»¶çš„æœ€åæ’å…¥ä¸€ä¸ªç©ºè¡Œ
insert_final_newline = true

[*.md]
trim_trailing_whitespace = false

[Makefile]
indent_style = tab
```

## æ·»åŠ  stylelint

[stylelint][https://stylelint.io/user-guide/get-started]æ˜¯ä¸€ä¸ª css è§„èŒƒæ ¡éªŒå·¥å…·ï¼Œä¹Ÿæ”¯æŒ less ç­‰ css é¢„å¤„ç†å™¨

æœ‰å…³ stylelint çš„è¯¦ç»†è®¨è®ºå¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« 

ä¸º`VSCode` å®‰è£… stylelint æ’ä»¶

å®‰è£…ä¾èµ–

```
yarn add stylelint stylelint-config-standard --dev
```

æ–°å»º `.stylelintrc.js`å¹¶åŠ å…¥ä»¥ä¸‹å†…å®¹

```
module.exports = {
  extends: "stylelint-config-standard",
  rules: {
    // your rules
  },
  // å¿½ç•¥å…¶ä»–æ–‡ä»¶ï¼Œåªæ ¡éªŒæ ·å¼ç›¸å…³çš„æ–‡ä»¶
  ignoreFiles: [
    "node_modules/**/*",
    "public/**/*",
    "dist/**/*",
    "**/*.js",
    "**/*.jsx",
    "**/*.tsx",
    "**/*.ts",
  ],
};
```

é…ç½® NPM è„šæœ¬

```
"script":{
 "lint:style": "stylelint --fix \"src/**/*.less\" --syntax less",
}
```

è§£é‡Šä¸€ä¸‹è„šæœ¬çš„å«ä¹‰: è‡ªåŠ¨ä¿®å¤`src` ç›®å½•ä¸‹çš„æ‰€æœ‰ less æ–‡ä»¶ä¸è§„èŒƒçš„å†…å®¹

## ESLint/Prettier/stylelint å·¥å…·åº“æ¨è

æ¨èä¸€ä¸ªé›†æˆäº† ESLint/Prettier/stylelint çš„å¼€æºåº“ umijs/fabric. å®ƒæŠŠæ‰€æœ‰çš„å¸¸è§è§„èŒƒéƒ½é›†æˆåœ¨äº†ä¸€èµ·ï¼Œè€Œä¸éœ€è¦å¼€å‘è€…å†å»å•ç‹¬ç»´æŠ¤ã€‚å¼•ç”¨è¯¥åº“çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•

è®©æˆ‘ä»¬å®‰è£…è¯¥ä¾èµ–

```
yarn add @umijs/fabric --dev
```

ä¿®æ”¹ ESLint/Prettier/stylelint å‡ ä¸ªæ–‡ä»¶çš„é…ç½®

```
// .prettierrc.js
const fabric = require("@umijs/fabric");

module.exports = {
  ...fabric.prettier,
};
// .stylelintrc.js
const fabric = require("@umijs/fabric");

module.exports = {
  ...fabric.stylelint,
};
// .eslintrc.js
module.exports = {
  extends: [require.resolve("@umijs/fabric/dist/eslint")],
  globals: {
    // å…¨å±€å˜é‡:åœ¨å…¨å±€ä¸­ä½¿ç”¨ REACT_APP_ENVæ—¶  eslintå°±ä¸ä¼šå‡ºç°è­¦å‘Š
    REACT_APP_ENV: true,
  },
};
```

æ³¨: å®‰è£…äº†`@umijs/fabric`å°±ä¸èƒ½å†å®‰è£…å…¶ä»– ESLint è§£æå™¨å¦‚`@typescript-eslint/parser`,å¦åˆ™ä¼šäº§ç”Ÿå†²çª

------

## æ·»åŠ  Git Hook

åªæ˜¯å•çº¯å¼•å…¥ä»£ç è§„èŒƒæ ¡éªŒå¦‚æœä¸å¼ºåˆ¶æ‰§è¡Œå°±ç­‰äºæ²¡åšï¼Œæ€»ä¼šæœ‰äººå·æ‡’ï¼Œæ‰€ä»¥è¿˜å¯ä»¥åŠ ä¸€é“é—¨æ§›è¿›è¡Œçº¦æŸã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ `lint-staged` å®ç°è¿™é“é—¨æ§›:åœ¨ git commit å‘½ä»¤è¿è¡Œæ—¶å…ˆæ ¡éªŒ lintï¼ˆeslint, stylelint ç­‰ï¼‰æ˜¯å¦é€šè¿‡ï¼Œæœªé€šè¿‡åˆ™ä¸äºˆæäº¤

- husky æ˜¯ä¸€ä¸ª gitHook å·¥å…·ï¼Œå¯ä»¥é…ç½® git çš„ä¸€äº›é’©å­ï¼Œæœ¬æ–‡ä¸»è¦ç”¨æ¥é…ç½® commit é’©å­
- lint-staged æ˜¯ä¸€ä¸ªåœ¨ git æš‚å­˜æ–‡ä»¶ä¸Šè¿è¡Œ lint æ ¡éªŒçš„å·¥å…·ï¼Œé…åˆ husky é…ç½® commit é’©å­ï¼Œç”¨äº git commit å‰çš„å¼ºåˆ¶æ ¡éªŒ

æœ‰å…³ Git Hook çš„è®¨è®ºå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« 

å®‰è£…ä¾èµ–

```
yarn add husky lint-staged --dev
{
  "scripts": {
    "precommit": "lint-staged",
    "lint-staged:js": "eslint --ext .js,.jsx,.ts,.tsx"
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "**/*.less": "stylelint --syntax less",
    "**/*.{js,jsx,ts,tsx}": "npm run lint-staged:js",
    "**/*.{js,jsx,tsx,ts,less,md,json}": ["prettier --write"]
  }
}
```

åœ¨æ¯æ¬¡ git commit ä¹‹å‰ä¼šè¿›å…¥å·¥ä½œåŒºæ–‡ä»¶æ‰«æï¼Œè‡ªåŠ¨ä¿®å¤ eslint/stylelint é—®é¢˜å†ä½¿ç”¨ prettier è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œæœ€åå†æäº¤åˆ°å·¥ä½œåŒºã€‚

æ³¨:

å¿…é€‰å…ˆä½¿ç”¨`git init` åˆå§‹åŒ– git ä»“åº“ï¼Œä¹‹åä½¿ç”¨ husky æ‰èƒ½ç”Ÿæ•ˆ

å¦‚æœé¢„æäº¤é’©å­ä¸ç”Ÿæ•ˆå¯ä»¥å‚è€ƒstackoverflow:lint-staged not running on precommit

## Commit Message è§„èŒƒ

å¤§é‡çš„ä»£ç æäº¤ï¼Œå¿…ç„¶ä¼šäº§ç”Ÿå¤§é‡çš„ Commit log. æ¯ä¸€æ¡éƒ½ Commit log è®°å½•ç€æŸä¸€é˜¶æ®µæ‰€å®Œæˆçš„äº‹ä»¥åŠå…³æ³¨ç‚¹ï¼Œåº”è¯¥å°½å¯èƒ½è¯¦ç»†å…·ä½“ï¼›åœ¨å·¥ä½œä¸­ä¸€ä»½æ¸…æ™°è§„èŒƒçš„ Commit Message èƒ½è®©åç»­ä»£ç å®¡æŸ¥ã€ä¿¡æ¯æŸ¥æ‰¾ã€ç‰ˆæœ¬å›é€€éƒ½æ›´åŠ é«˜æ•ˆå¯é ã€‚

### Commit message æ ¼å¼

`<type>: <subject>` æ³¨æ„å†’å·åé¢æœ‰ç©ºæ ¼ã€‚

### type

ç”¨äºè¯´æ˜ commit çš„ç±»åˆ«ï¼Œåªå…è®¸ä½¿ç”¨ä¸‹é¢ 7 ä¸ªæ ‡è¯†ã€‚

- featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰
- fixï¼šä¿®è¡¥ bug
- docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰
- styleï¼šæ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰
- refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰
- testï¼šå¢åŠ æµ‹è¯•
- choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

å¦‚æœ type ä¸º feat å’Œ fixï¼Œåˆ™è¯¥ commit å°†è‚¯å®šå‡ºç°åœ¨ Change log ä¹‹ä¸­ã€‚

### subject

subject æ˜¯ commit ç›®çš„çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡ 50 ä¸ªå­—ç¬¦ï¼Œä¸”ç»“å°¾ä¸åŠ å¥å·ï¼ˆ.ï¼‰ã€‚

```
git commit -m 'feat:æ·»åŠ äº†ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨é¡µé¢'

git commit -m 'fix:ä¿®å¤ç”¨æˆ·åˆ—è¡¨é¡µé¢æ— æ³•æ˜¾ç¤ºçš„bug'

git commit -m 'refactor:ç”¨æˆ·åˆ—è¡¨é¡µé¢ä»£ç é‡æ„'
```

è¿™é‡Œå¤šä¸€å˜´: ç½‘ä¸Šæœ‰è®¸å¤šæ•™ç¨‹é€šè¿‡commitizen å®ç°å¼ºåˆ¶çš„ Commit Message æ ¼å¼è§„èŒƒï¼Œæˆ‘æ˜¯ä¸èµåŒçš„ã€‚è§„èŒƒåº”è¯¥æ˜¯æ¯ä¸ªå¼€å‘è€…è‡ªå‘éµå¾ªçš„,å¦‚æœè§„èŒƒè¿‡å¤šè®°ä¸ä½ï¼Œå¯ä»¥é€šè¿‡ ESLint ç­‰å¼ºåˆ¶æ‰§è¡Œå…»æˆä¹ æƒ¯ã€‚ä½†å¯¹äºè¿™ç§ç®€å•çš„è§„èŒƒæˆ‘ä»¬åº”è¯¥è‡ªå‘éµå®ˆï¼Œæ›´ä½•å†µè¿˜æœ‰è§„èŒƒæ ¡éªŒçš„æœ€åä¸€é“é—¨æ§›-å›¢é˜Ÿä»£ç å®¡æŸ¥(è½»åˆ™è¢«å›¢é˜Ÿå¤§ä½¬å–·çš„ä½“æ— å®Œè‚¤ï¼Œé‡åˆ™å·é“ºç›–èµ°äºº ğŸ™„)

